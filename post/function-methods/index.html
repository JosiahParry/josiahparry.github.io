<!DOCTYPE html>

<html lang="en-us">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>Josiah Parry</title>
    
    
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="/css/main.min.d3bf53b36f3c9a16e5cdae3b1e9f6320cf7e1833357c47d8a780ef4d7069c3bc.css"/>

    
    
    

    
    
 
    
    
    
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WZD2QXY3QW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WZD2QXY3QW');
</script>
</head>
    <body>
        
<nav>
  <header>
    <div class="site-title">
        <a href="/">Josiah Parry</a>
    </div>
      
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/atelier-estuary-light.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<a rel="me" href="https://fosstodon.org/@josiahparry"></a>
<a rel="me" href="https://mapstodon.space/@josiah"></a>

</header>
  <div class="nav-menu">
  
    <a class="color-link nav-link" href="/about/">about</a>
  
    <a class="color-link nav-link" href="/">posts</a>
  
    <a class="color-link nav-link" href="/projects/">projects</a>
  
    <a class="color-link nav-link" href="/tags/">tags</a>
  
    <a class="color-link nav-link" href="/archives/">archives</a>
  
  <a class="color-link nav-link" href="/index.xml" target="_blank" rel="noopener" type="application/rss+xml">RSS</a>
</div>
<footer class="footer">
	<div class="social-icons">
        

    

    
    <a class="social-icon" href="https://twitter.com/@josiahparry" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    
    <a class="social-icon" href="https://linkedin.com/in/josiahparry" target="_blank" rel="noopener" title="LinkedIn">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M2,3.654102 C2,2.69908141 2.79442509,1.92397846 3.77383592,1.92397846 L24.2261641,1.92397846 C25.2058917,1.92397846 26,2.69908141 26,3.654102 L26,24.3462148 C26,25.3015521 25.2058917,26.0760215 24.2261641,26.0760215 L3.77383592,26.0760215 C2.79442509,26.0760215 2,25.3015521 2,24.3465315 L2,3.65378524 L2,3.654102 Z M9.27526132,22.1415901 L9.27526132,11.2356668 L5.65030092,11.2356668 L5.65030092,22.1415901 L9.27557808,22.1415901 L9.27526132,22.1415901 Z M7.46341463,9.74691162 C8.72727273,9.74691162 9.51409566,8.90940767 9.51409566,7.86284447 C9.49033893,6.79252455 8.72727273,5.97846056 7.48748812,5.97846056 C6.24675325,5.97846056 5.43649034,6.79252455 5.43649034,7.86284447 C5.43649034,8.90940767 6.22299652,9.74691162 7.4396579,9.74691162 L7.46309788,9.74691162 L7.46341463,9.74691162 Z M11.2815965,22.1415901 L14.9062401,22.1415901 L14.9062401,16.0519481 C14.9062401,15.7263225 14.9299968,15.4000634 15.0256573,15.1675641 C15.2876148,14.5159962 15.8840672,13.8416218 16.8856509,13.8416218 C18.1970225,13.8416218 18.7218879,14.8416218 18.7218879,16.3078872 L18.7218879,22.1415901 L22.3465315,22.1415901 L22.3465315,15.8885017 C22.3465315,12.5388027 20.5584416,10.9800443 18.1735825,10.9800443 C16.2182452,10.9800443 15.3595185,12.072854 14.8824834,12.8172315 L14.9065569,12.8172315 L14.9065569,11.2359835 L11.2819132,11.2359835 C11.3291099,12.2591067 11.2815965,22.1419069 11.2815965,22.1419069 L11.2815965,22.1415901 Z"></path>
        </svg>
    </a>
    

    
    <a class="social-icon" href="https://medium.com/@JosiahParry/" target="_blank" rel="noopener" title="Medium">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M2,2 L26,2 L26,26 L2,26 L2,2 Z M7.72727142,10.0265545 L7.72727142,17.1527156 C7.77112416,17.4097828 7.69008764,17.6723786 7.50898513,17.8600642 L5.81538462,19.9143852 L5.81538462,20.1852847 L10.617683,20.1852847 L10.617683,19.9143852 L8.92408245,17.8600642 C8.74165168,17.6726892 8.65559727,17.4118239 8.69074193,17.1527156 L8.69074193,10.9897526 L12.9059255,20.1852847 L13.3951878,20.1852847 L17.0157294,10.9897526 L17.0157294,18.3190884 C17.0157294,18.514738 17.0157294,18.5523628 16.8877685,18.6802876 L15.5855778,19.9444852 L15.5855778,20.2153846 L21.9083531,20.2153846 L21.9083531,19.9444852 L20.6513252,18.7103876 C20.5403599,18.6258033 20.4853154,18.4867833 20.50831,18.3491883 L20.50831,9.28158097 C20.4853154,9.14398599 20.5403599,9.00496587 20.6513252,8.92038167 L21.9384615,7.68628409 L21.9384615,7.41538462 L17.4824105,7.41538462 L14.3059685,15.3391941 L10.6929541,7.41538462 L6.01861668,7.41538462 L6.01861668,7.68628409 L7.52403936,9.49980554 C7.67182769,9.63301305 7.74730311,9.82863473 7.72727142,10.0265545 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/josiahparry" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    
</div>




 
	
	<script src="/js/main.min.c1aee25a817e9beb1f9c4afd9d62311227a7f5e46720e404dc1dda97281f47f2.js" integrity="sha256-wa7iWoF+m+sfnEr9nWIxEien9eRnIOQE3B3alygfR/I="></script>
</footer>
</nav>
        <div id="content" class="content-container">
        

<h1 class="post-title">[Not so] generic functions</h1>
    
    <time>November 28, 2018</time>
    
    <div>
        <p>
        

<div id="TOC">
<ul>
<li><a href="#the-jargon">The Jargon</a></li>
<li><a href="#the-generic-method">The Generic Method</a></li>
<li><a href="#the-default-method">The Default Method</a></li>
<li><a href="#sf-method"><code>sf</code> method</a></li>
<li><a href="#tbl_graph-method"><code>tbl_graph</code> method</a></li>
<li><a href="#review-tldr">Review (tl;dr)</a></li>
</ul>
</div>

<p>Lately I have been doing more of my spatial analysis work in R with the help of the <code>sf</code> package. One shapefile I was working with had some horrendously named columns, and naturally, I tried to clean them using the <code>clean_names()</code> function from the <code>janitor</code> package. But lo, an egregious error occurred. To this end, I officially filed my complaint as an <a href="https://github.com/sfirke/janitor/pull/249">issue</a>. The solution presented was to <em>simply</em> create a method for <code>sf</code> objects.</p>
<p>Yeah, methods, how tough can those be? Apparently the process isn’t at all difficult. But figuring out the process? That was difficult. This post will explain how I went about the process for converting the <code>clean_names()</code> function into a <em>generic</em> (I’ll explain this in a second), and creating a <em>method</em> for <code>sf</code> and <code>tbl_graph</code> objects.</p>
<div id="the-jargon" class="section level3">
<h3>The Jargon</h3>
<p>Okay, I want to address the jargon. What the hell is a <em>generic</em> function, and what is a <em>method</em>? But first, I want to give a quick tl;dr on what a function is. I define as function as bit of code that takes an input, changes it in some way, and produces an output. Even simpler, a function takes an input and creates an output.</p>
<div id="generic-functions" class="section level4">
<h4>Generic Functions</h4>
<p>Now, what is a <em><strong>generic</strong></em> function? My favorite definition that I’ve seen so far comes from <em>LispWorks Ltd</em> (their website is a historic landmark, I recommend you give it a look for a reminder of what the internet used to be). They define a <a href="http://clhs.lisp.se/Body/07_fa.htm">generic function</a> as</p>
<blockquote>
<p>a function whose behavior depends on the classes or identities of the arguments supplied to it.</p>
</blockquote>
<p>This means that we have to create a function that looks at the class of an object and perform an operation based on the object class. That means if there is <code>&quot;numeric&quot;</code> or <code>&quot;list&quot;</code> object, they will be treated differently. These are called <code>methods</code>. Note: you can find the class of an object by using the <code>class()</code> function on any object.</p>
</div>
<div id="methods" class="section level4">
<h4>Methods</h4>
<p>To steal from <em>LispWorks Ltd</em> again, a <a href="http://clhs.lisp.se/Body/26_glo_m.htm#method">method</a> is</p>
<blockquote>
<p>part of a generic function which provides information about how that generic function should behave [for] certain classes.</p>
</blockquote>
<p>This means that a method is part of a generic function and has to be defined separately. Imagine we have a generic function called <code>f</code> with methods for <code>list</code> and <code>numeric</code> objects. The way that we would denote these methods is by putting a period after the function name and indicating the type of object the function is to be used on. These would look like <code>f.list</code> and <code>f.numeric</code> respectively.</p>
<p>But to save time you can always create a <code>default</code> method which will be dispatched (used) on any object that it hasn’t been explicitly told how to operate on (by a specific method).</p>
<p>Now that the intuition of what generic functions and methods R, we can begin the work of actually creating them. This tutorial will walk through the steps I took in changing the <code>clean_names()</code> from a standard function into a generic function with methods for <code>sf</code> objects and <code>tbl_graph</code> objects from the <a href="https://github.com/r-spatial/sf"><code>sf</code></a> and <a href="https://github.com/thomasp85/tidygraph"><code>tidygraph</code></a> packages respectively.</p>
<p>A brief overview of the process:</p>
<ol style="list-style-type: decimal">
<li>Define the generic function</li>
<li>Create a default method</li>
<li>Create additional methods</li>
</ol>
<p>A quick note: The code that follows is not identical to that of the package. I will be changing it up to make it simpler to read and understand what is happening.</p>
</div>
</div>
<div id="the-generic-method" class="section level3">
<h3>The Generic Method</h3>
<p>The first step, as described above, is to create a generic function. Generic functions are made by creating a new function with the body containing only a call to the <code>UseMethod()</code> function. The only argument to this is the name of your generic function—this should be the same as the name of the function you are making. This tells R that you are creating a generic function. Additionally, you should add any arguments that will be necessary for your function. Here, there are two arguments: <code>dat</code> and <code>case</code>. These indicate the data to be cleaned and the preferred style for them to be cleaned according to.</p>
<p>I am not setting any default values for <code>dat</code> to make it required, whereas I am setting <code>case</code> to <code>&quot;snake&quot;</code>.</p>
<pre class="r"><code>clean_names &lt;- function(dat, case = &quot;snake&quot;) {
  UseMethod(&quot;clean_names&quot;)
}</code></pre>
<p>Now we have created a generic function. But this function doesn’t know how to run on any given object types. In other words, there are no methods associated with it. To illustrate this try using the <code>clean_names()</code> function we just defined on objects of different types.</p>
<pre><code>clean_names(1) # numeric 
clean_names(&quot;test&quot;) # character 
clean_names(TRUE) # logical </code></pre>
<pre><code>## [1] &quot;no applicable method for &#39;clean_names&#39; applied to an object of class \&quot;c(&#39;double&#39;, &#39;numeric&#39;)\&quot;&quot;</code></pre>
<pre><code>## [1] &quot;no applicable method for &#39;clean_names&#39; applied to an object of class \&quot;character\&quot;&quot;</code></pre>
<pre><code>## [1] &quot;no applicable method for &#39;clean_names&#39; applied to an object of class \&quot;logical\&quot;&quot;</code></pre>
<p>The output of these calls say <code>no applicable method for 'x' applied to an object of [class]</code>. In order to prevent this from happening, we can create a default method. A default method will always be used if the function doesn’t have a method for the provided object type.</p>
</div>
<div id="the-default-method" class="section level3">
<h3>The Default Method</h3>
<p>Remember that methods are indicated by writing <code>function.method</code>. It is also important to note that the <code>method</code> should indicate an object class. To figure out what class an object is you can use the <code>class()</code> function. For example <code>class(1)</code> tells you that the number <code>1</code> is “numeric”.</p>
<p>In this next step I want to create a default method that will be used on every object that there isn’t a method explicitly for. To do this I will create a function called <code>clean_names.default</code>.</p>
<p>As background, the <code>clean_names()</code> function takes a data frame and changes column headers to fit a given style. <code>clean_names()</code> in the <a href="https://github.com/sfirke/janitor">development version</a> is based on the function <code>make_clean_names()</code> which takes a character vector and makes each value match a given style (the default is snake, and you should only use snake case because everything else is wrong * sarcasm * ).</p>
<p>To prevent us from loading the entire <code>janitor</code> package and overwriting our version of the <code>clean_names()</code> function, we can import the <code>make_clean_names()</code> function directly from GitHub by reading the file directly.</p>
<pre class="r"><code>source(&quot;https://raw.githubusercontent.com/sfirke/janitor/master/R/make_clean_names.R&quot;)</code></pre>
<p>Now let’s see how this function works. For this we will use the ugliest character vector I have ever seen from the <a href="https://github.com/sfirke/janitor/blob/master/tests/testthat/test-clean-names.R">tests</a> for <code>clean_names()</code> (h/t <span class="citation">@sfirke</span> for making this).</p>
<pre class="r"><code>ugly_names &lt;- c(
  &quot;sp ace&quot;, &quot;repeated&quot;, &quot;a**^@&quot;, &quot;%&quot;, &quot;*&quot;, &quot;!&quot;,
  &quot;d(!)9&quot;, &quot;REPEATED&quot;, &quot;can\&quot;&#39;t&quot;, &quot;hi_`there`&quot;, &quot;  leading spaces&quot;,
  &quot;€&quot;, &quot;ação&quot;, &quot;Farœ&quot;, &quot;a b c d e f&quot;, &quot;testCamelCase&quot;, &quot;!leadingpunct&quot;,
  &quot;average # of days&quot;, &quot;jan2009sales&quot;, &quot;jan 2009 sales&quot;
)

ugly_names</code></pre>
<pre><code>##  [1] &quot;sp ace&quot;            &quot;repeated&quot;          &quot;a**^@&quot;            
##  [4] &quot;%&quot;                 &quot;*&quot;                 &quot;!&quot;                
##  [7] &quot;d(!)9&quot;             &quot;REPEATED&quot;          &quot;can\&quot;&#39;t&quot;          
## [10] &quot;hi_`there`&quot;        &quot;  leading spaces&quot;  &quot;€&quot;                
## [13] &quot;ação&quot;              &quot;Farœ&quot;              &quot;a b c d e f&quot;      
## [16] &quot;testCamelCase&quot;     &quot;!leadingpunct&quot;     &quot;average # of days&quot;
## [19] &quot;jan2009sales&quot;      &quot;jan 2009 sales&quot;</code></pre>
<p>Now to see how this function works:</p>
<pre class="r"><code>make_clean_names(ugly_names)</code></pre>
<pre><code>##  [1] &quot;sp_ace&quot;                 &quot;repeated&quot;              
##  [3] &quot;a&quot;                      &quot;percent&quot;               
##  [5] &quot;x&quot;                      &quot;x_2&quot;                   
##  [7] &quot;d_9&quot;                    &quot;repeated_2&quot;            
##  [9] &quot;cant&quot;                   &quot;hi_there&quot;              
## [11] &quot;leading_spaces&quot;         &quot;x_3&quot;                   
## [13] &quot;acao&quot;                   &quot;faroe&quot;                 
## [15] &quot;a_b_c_d_e_f&quot;            &quot;test_camel_case&quot;       
## [17] &quot;leadingpunct&quot;           &quot;average_number_of_days&quot;
## [19] &quot;jan2009sales&quot;           &quot;jan_2009_sales&quot;</code></pre>
<p>Très magnifique!</p>
<p>The body of the default method will take column names from a dataframe, clean them, and reassign them. Before we can do this, a dataframe is needed!</p>
<pre class="r"><code># create a data frame with 20 columns
test_df &lt;- as_tibble(matrix(sample(100, 20), ncol = 20))</code></pre>
<pre><code>## Warning: `as_tibble.matrix()` requires a matrix with column names or a `.name_repair` argument. Using compatibility `.name_repair`.
## This warning is displayed once per session.</code></pre>
<pre class="r"><code># makes the column names the `ugly_names` vector
names(test_df) &lt;- ugly_names

# print the data frame.
test_df</code></pre>
<pre><code>## # A tibble: 1 x 20
##   `sp ace` repeated `a**^@`   `%`   `*`   `!` `d(!)9` REPEATED `can&quot;&#39;t`
##      &lt;int&gt;    &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;    &lt;int&gt;    &lt;int&gt;
## 1       68       14      47   100    51    74      37        1       94
## # … with 11 more variables: `hi_\`there\`` &lt;int&gt;, ` leading spaces` &lt;int&gt;,
## #   `€` &lt;int&gt;, ação &lt;int&gt;, Farœ &lt;int&gt;, `a b c d e f` &lt;int&gt;,
## #   testCamelCase &lt;int&gt;, `!leadingpunct` &lt;int&gt;, `average # of days` &lt;int&gt;,
## #   jan2009sales &lt;int&gt;, `jan 2009 sales` &lt;int&gt;</code></pre>
<p>The process for writing this function is:</p>
<ul>
<li>take a dataframe</li>
<li>take the old column names and clean them</li>
<li>reassign the column names as the new clean names</li>
<li>return the object</li>
</ul>
<pre class="r"><code>clean_names.default &lt;- function(dat, case = &quot;snake&quot;) { 
  # retrieve the old names
  old_names &lt;- names(dat)
  # clean the old names
  new_names &lt;- make_clean_names(old_names, case = case)
  # assign the column names as the clean names vector
  names(dat) &lt;- new_names
  # return the data
  return(dat)
  }</code></pre>
<p>Now that the default method has been defined. Try running the function on our test dataframe!</p>
<pre class="r"><code>clean_names(test_df)</code></pre>
<pre><code>## # A tibble: 1 x 20
##   sp_ace repeated     a percent     x   x_2   d_9 repeated_2  cant hi_there
##    &lt;int&gt;    &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;      &lt;int&gt; &lt;int&gt;    &lt;int&gt;
## 1     68       14    47     100    51    74    37          1    94       45
## # … with 10 more variables: leading_spaces &lt;int&gt;, x_3 &lt;int&gt;, acao &lt;int&gt;,
## #   faroe &lt;int&gt;, a_b_c_d_e_f &lt;int&gt;, test_camel_case &lt;int&gt;,
## #   leadingpunct &lt;int&gt;, average_number_of_days &lt;int&gt;, jan2009sales &lt;int&gt;,
## #   jan_2009_sales &lt;int&gt;</code></pre>
<p>Oh, my gorsh. Look at that! We can try replicating this with a named vector to see how the default method dispatched on unknown objects!</p>
<pre class="r"><code># create a vector with 20 elements
test_vect &lt;- c(1:20)

# name each element with the ugly_names vector 
names(test_vect) &lt;- ugly_names

# try cleaning!
clean_names(test_vect)</code></pre>
<pre><code>##                 sp_ace               repeated                      a 
##                      1                      2                      3 
##                percent                      x                    x_2 
##                      4                      5                      6 
##                    d_9             repeated_2                   cant 
##                      7                      8                      9 
##               hi_there         leading_spaces                    x_3 
##                     10                     11                     12 
##                   acao                  faroe            a_b_c_d_e_f 
##                     13                     14                     15 
##        test_camel_case           leadingpunct average_number_of_days 
##                     16                     17                     18 
##           jan2009sales         jan_2009_sales 
##                     19                     20</code></pre>
<p>It looks like this default function works super well with named objects! Now, we will broach the problem I started with, <code>sf</code> objects.</p>
</div>
<div id="sf-method" class="section level3">
<h3><code>sf</code> method</h3>
<p>This section will go over the process for creating the <code>sf</code> method. If you have not ever used the <code>sf</code> package, I suggest you give it a try! It makes dataframe objects with spatial data associated with it. This allows you to perform many of the functions from the <code>tidyverse</code> to spatial data.</p>
<p>Before getting into it, I want to create a test object to work with. I will take the <code>test_df</code> column, create longitude and latitude columns, and then convert it into an <code>sf</code> object. The details of <code>sf</code> objects is out of the scope of this post.</p>
<pre class="r"><code>library(sf)</code></pre>
<pre><code>## Linking to GEOS 3.7.2, GDAL 2.4.2, PROJ 5.2.0</code></pre>
<pre class="r"><code>test_sf &lt;- test_df %&gt;%
  # create xy columns
  mutate(long = -80, 
         lat = 40) %&gt;% 
  # convert to sf object 
  st_as_sf(coords = c(&quot;long&quot;, &quot;lat&quot;))

# converting geometry column name to poor style
names(test_sf)[21] &lt;- &quot;Geometry&quot;

# telling sf which column is now the geometry
st_geometry(test_sf) &lt;- &quot;Geometry&quot;

test_sf</code></pre>
<pre><code>## Simple feature collection with 1 feature and 20 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -80 ymin: 40 xmax: -80 ymax: 40
## epsg (SRID):    NA
## proj4string:    NA
## # A tibble: 1 x 21
##   `sp ace` repeated `a**^@`   `%`   `*`   `!` `d(!)9` REPEATED `can&quot;&#39;t`
##      &lt;int&gt;    &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;    &lt;int&gt;    &lt;int&gt;
## 1       68       14      47   100    51    74      37        1       94
## # … with 12 more variables: `hi_\`there\`` &lt;int&gt;, ` leading spaces` &lt;int&gt;,
## #   `€` &lt;int&gt;, ação &lt;int&gt;, Farœ &lt;int&gt;, `a b c d e f` &lt;int&gt;,
## #   testCamelCase &lt;int&gt;, `!leadingpunct` &lt;int&gt;, `average # of days` &lt;int&gt;,
## #   jan2009sales &lt;int&gt;, `jan 2009 sales` &lt;int&gt;, Geometry &lt;POINT&gt;</code></pre>
<p>The <code>sf</code> object has been created. But now how does our default method of the <code>clean_names()</code> function work on this object? There is only one way to know, try it.</p>
<pre><code>clean_names(test_sf)

Error in st_geometry.sf(x) : attr(obj, &quot;sf_column&quot;) does not point to a geometry column. Did you rename it, without setting st_geometry(obj) &lt;- &quot;newname&quot;?</code></pre>
<p>Notice how it fails. <code>sf</code> noticed that I changed the name of the geometry column without explicitly telling it I did so. Since the geometry column is <em>almost</em> always the last column of an sf object, we can use the <code>make_clean_names()</code> function on every column but the last one! To do this we will use the <code>rename_at()</code> function from <code>dplyr</code>. This function allows you rename columns based on their name or position, and a function that renames it (in this case, <code>make_clean_names()</code>).</p>
<p>For this example dataset, say I wanted to clean the first column. How would I do that? Note that the first column is called <code>sp ace</code>.
How this works can be seen in a simple example. In the below function call we are using the <code>rename_at()</code> function (for more, go <a href="https://dplyr.tidyverse.org/reference/select.html">here</a>), selecting the first column name, and renaming it using the <code>make_clean_names()</code> function.</p>
<pre class="r"><code>rename_at(test_df, .vars = vars(1), .funs = make_clean_names)</code></pre>
<pre><code>## # A tibble: 1 x 20
##   sp_ace repeated `a**^@`   `%`   `*`   `!` `d(!)9` REPEATED `can&quot;&#39;t`
##    &lt;int&gt;    &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;    &lt;int&gt;    &lt;int&gt;
## 1     68       14      47   100    51    74      37        1       94
## # … with 11 more variables: `hi_\`there\`` &lt;int&gt;, ` leading spaces` &lt;int&gt;,
## #   `€` &lt;int&gt;, ação &lt;int&gt;, Farœ &lt;int&gt;, `a b c d e f` &lt;int&gt;,
## #   testCamelCase &lt;int&gt;, `!leadingpunct` &lt;int&gt;, `average # of days` &lt;int&gt;,
## #   jan2009sales &lt;int&gt;, `jan 2009 sales` &lt;int&gt;</code></pre>
<p>Notice how only the first column has been cleaned. It went from <code>sp ace</code> to <code>sp_ace</code>. The goal is to replicate this for all columns <em>except</em> the last one.</p>
<p>To write the sf method, the above line of code can be adapted to select columns 1 through the number of columns <em>minus</em> 1 (so geometry isn’t selected). In order to make this work, we need to identify the second to last column—this will be supplied as the ending value of our selected variables.</p>
<pre class="r"><code>clean_names.sf &lt;- function(dat, case = &quot;snake&quot;) {
  # identify last column that is not geometry
  last_col_to_clean &lt;- ncol(dat) - 1
  # create a new dat object
  dat &lt;- rename_at(dat, 
                   # rename the first up until the second to last
                   .vars = vars(1:last_col_to_clean), 
                   # clean using the make_clean_names
                   .funs = make_clean_names)
  return(dat)
}</code></pre>
<p>Voilà! Our first non-default method has been created. This means that when an <code>sf</code> object is supplied to our generic function <code>clean_names()</code> it looks at the class of the object—<code>class(sf_object)</code>—notices it’s an <code>sf</code> object, then dispatches (uses) the <code>clean_names.sf()</code> method instead of the default.</p>
<pre class="r"><code>clean_names(test_sf)</code></pre>
<pre><code>## Note: Using an external vector in selections is ambiguous.
## ℹ Use `all_of(last_col_to_clean)` instead of `last_col_to_clean` to silence this message.
## ℹ See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.
## This message is displayed once per session.</code></pre>
<pre><code>## Simple feature collection with 1 feature and 20 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: -80 ymin: 40 xmax: -80 ymax: 40
## epsg (SRID):    NA
## proj4string:    NA
## # A tibble: 1 x 21
##   sp_ace repeated     a percent     x   x_2   d_9 repeated_2  cant hi_there
##    &lt;int&gt;    &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;      &lt;int&gt; &lt;int&gt;    &lt;int&gt;
## 1     68       14    47     100    51    74    37          1    94       45
## # … with 11 more variables: leading_spaces &lt;int&gt;, x_3 &lt;int&gt;, acao &lt;int&gt;,
## #   faroe &lt;int&gt;, a_b_c_d_e_f &lt;int&gt;, test_camel_case &lt;int&gt;,
## #   leadingpunct &lt;int&gt;, average_number_of_days &lt;int&gt;, jan2009sales &lt;int&gt;,
## #   jan_2009_sales &lt;int&gt;, Geometry &lt;POINT&gt;</code></pre>
<p>Here we see that it worked exactly as we hoped. Every column but the last has been altered. This allows <code>sf</code> to name it’s geometry columns whatever it would like without disrupting it.</p>
<p>Shortly after this addition was added to the package I became aware of another type of object that had problems using <code>clean_names()</code>. This is the <code>tbl_graph</code> object from the <code>tidygraph</code> package from Thomas Lin Pederson.</p>
</div>
<div id="tbl_graph-method" class="section level3">
<h3><code>tbl_graph</code> method</h3>
<p>In issue <a href="https://github.com/sfirke/janitor/issues/252">#252</a> <a href="https://github.com/gvdr">@gvdr</a> noted that calling <code>clean_names()</code> on a <code>tbl_graph</code> doesn’t execute. Thankfully <a href="https://github.com/Tazinho">@Tazinho</a> noted that you could easily clean the column headers by using the <code>rename_all()</code> function from <code>dplyr</code>.</p>
<p>Here the solution was even easier than above. As a reminder, in order to make the <code>tbl_graph</code> method, we need to specify the name of the generic followed by the object class.</p>
<pre class="r"><code>clean_names.tbl_graph &lt;- function(dat, case = &quot;snake&quot;) { 
  # rename all columns
  dat &lt;- rename_all(dat, make_clean_names)
  return(dat)
  }</code></pre>
<p>In order to test the function, we will need a graph to test it on. This example draws on the example used in the issue.</p>
<pre class="r"><code>library(tidygraph)
# create test graph to test clean_names
test_graph &lt;- play_erdos_renyi(0, 0.5) %&gt;% 
  # attach test_df as columns 
  bind_nodes(test_df)

test_graph</code></pre>
<pre><code>## # A tbl_graph: 1 nodes and 0 edges
## #
## # A rooted tree
## #
## # Node Data: 1 x 20 (active)
##   `sp ace` repeated `a**^@`   `%`   `*`   `!` `d(!)9` REPEATED `can&quot;&#39;t`
##      &lt;int&gt;    &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt;    &lt;int&gt;    &lt;int&gt;
## 1       68       14      47   100    51    74      37        1       94
## # … with 11 more variables: `hi_\`there\`` &lt;int&gt;, ` leading spaces` &lt;int&gt;,
## #   `€` &lt;int&gt;, ação &lt;int&gt;, Farœ &lt;int&gt;, `a b c d e f` &lt;int&gt;,
## #   testCamelCase &lt;int&gt;, `!leadingpunct` &lt;int&gt;, `average # of days` &lt;int&gt;,
## #   jan2009sales &lt;int&gt;, `jan 2009 sales` &lt;int&gt;
## #
## # Edge Data: 0 x 2
## # … with 2 variables: from &lt;int&gt;, to &lt;int&gt;</code></pre>
<p>Here we see that there is a graph with only 1 node and 0 edges (relations) with bad column headers (for more, visit the <a href="https://github.com/thomasp85/tidygraph/">GitHub page</a>). Now we can test this as well.</p>
<pre class="r"><code>clean_names(test_graph)</code></pre>
<pre><code>## # A tbl_graph: 1 nodes and 0 edges
## #
## # A rooted tree
## #
## # Node Data: 1 x 20 (active)
##   sp_ace repeated     a percent     x   x_2   d_9 repeated_2  cant hi_there
##    &lt;int&gt;    &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;      &lt;int&gt; &lt;int&gt;    &lt;int&gt;
## 1     68       14    47     100    51    74    37          1    94       45
## # … with 10 more variables: leading_spaces &lt;int&gt;, x_3 &lt;int&gt;, acao &lt;int&gt;,
## #   faroe &lt;int&gt;, a_b_c_d_e_f &lt;int&gt;, test_camel_case &lt;int&gt;,
## #   leadingpunct &lt;int&gt;, average_number_of_days &lt;int&gt;, jan2009sales &lt;int&gt;,
## #   jan_2009_sales &lt;int&gt;
## #
## # Edge Data: 0 x 2
## # … with 2 variables: from &lt;int&gt;, to &lt;int&gt;</code></pre>
<p>It worked as anticipated!</p>
</div>
<div id="review-tldr" class="section level3">
<h3>Review (tl;dr)</h3>
<p>In the preceding sections we learned what generic functions and methods are. How to create a generic function, a default method, and methods for objects of different classes.</p>
<ul>
<li><strong>generic function</strong>: “A generic function is a function whose behavior depends on the classes or identities of the arguments supplied to it”</li>
<li><strong>generic function method</strong>: “part of a generic function and which provides information about how that generic function should behave [for] certain classes”</li>
</ul>
<p>The process to create a function with a method is to:</p>
<ol style="list-style-type: decimal">
<li>Create a generic function with:
<ul>
<li><code>f_x &lt;- function() { UseMethod(&quot;f_x&quot;) }</code></li>
</ul></li>
<li>Define the default method with:
<ul>
<li><code>f_x.default &lt;- function() { do something }</code></li>
</ul></li>
<li>Define object class specific methods with:
<ul>
<li><code>f_x.class &lt;- function() { do something else}</code></li>
</ul></li>
</ol>
<div id="notes" class="section level4">
<h4>Notes</h4>
<p>If you have not yet encountered the <code>janitor</code> package it will help you tremendously with various data cleaning processes. Clearly, <code>clean_names()</code> is my favorite function as it helps me enforce my preferred style (and the only). If you are not aware of <em>“proper”</em> R style, I suggest you read the <a href="http://adv-r.had.co.nz/Style.html">style guide</a> in <a href="http://adv-r.had.co.nz/">Advanced R</a>.</p>
<p>While on the subject of <em>Advanced R</em>, I suggest you read the “Creating new methods and generics” <a href="http://adv-r.had.co.nz/OO-essentials.html">section</a> of it. I struggled comprehending it at first because I didn’t even know what a method was. However, if after reading this you feel like you want more, that’s the place to go.</p>
<p>I’d like to thank <a href="https://github.com/sfirke">@sfirke</a> for being exceptionally helpful in guiding my contributions to the <code>janitor</code> package.</p>
</div>
</div>

        </p>
    </div>
    
    
        <script src="https://utteranc.es/client.js"
        repo="josiahparry/josiahparry.github.io"
        issue-term="pathname"
        theme="gruvbox-dark"
        crossorigin="anonymous"
        async>
</script>

    


    <div class="page-footer">
        
        <hr class="footer-divider">
        
            <a class="tag" href="/tags/r">#R</a>
        
            <a class="tag" href="/tags/tutorial">#tutorial</a>
        
            <a class="tag" href="/tags/packages">#packages</a>
        
            <a class="tag" href="/tags/functions">#functions</a>
        
            <a class="tag" href="/tags/methods">#methods</a>
        
            <a class="tag" href="/tags/generics">#generics</a>
        
            <a class="tag" href="/tags/s3">#s3</a>
        
      
    </div>
    

    



        




<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

        </div>
        <footer class="footer-mobile">
	<div class="social-icons">
        

    

    
    <a class="social-icon" href="https://twitter.com/@josiahparry" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    
    <a class="social-icon" href="https://linkedin.com/in/josiahparry" target="_blank" rel="noopener" title="LinkedIn">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M2,3.654102 C2,2.69908141 2.79442509,1.92397846 3.77383592,1.92397846 L24.2261641,1.92397846 C25.2058917,1.92397846 26,2.69908141 26,3.654102 L26,24.3462148 C26,25.3015521 25.2058917,26.0760215 24.2261641,26.0760215 L3.77383592,26.0760215 C2.79442509,26.0760215 2,25.3015521 2,24.3465315 L2,3.65378524 L2,3.654102 Z M9.27526132,22.1415901 L9.27526132,11.2356668 L5.65030092,11.2356668 L5.65030092,22.1415901 L9.27557808,22.1415901 L9.27526132,22.1415901 Z M7.46341463,9.74691162 C8.72727273,9.74691162 9.51409566,8.90940767 9.51409566,7.86284447 C9.49033893,6.79252455 8.72727273,5.97846056 7.48748812,5.97846056 C6.24675325,5.97846056 5.43649034,6.79252455 5.43649034,7.86284447 C5.43649034,8.90940767 6.22299652,9.74691162 7.4396579,9.74691162 L7.46309788,9.74691162 L7.46341463,9.74691162 Z M11.2815965,22.1415901 L14.9062401,22.1415901 L14.9062401,16.0519481 C14.9062401,15.7263225 14.9299968,15.4000634 15.0256573,15.1675641 C15.2876148,14.5159962 15.8840672,13.8416218 16.8856509,13.8416218 C18.1970225,13.8416218 18.7218879,14.8416218 18.7218879,16.3078872 L18.7218879,22.1415901 L22.3465315,22.1415901 L22.3465315,15.8885017 C22.3465315,12.5388027 20.5584416,10.9800443 18.1735825,10.9800443 C16.2182452,10.9800443 15.3595185,12.072854 14.8824834,12.8172315 L14.9065569,12.8172315 L14.9065569,11.2359835 L11.2819132,11.2359835 C11.3291099,12.2591067 11.2815965,22.1419069 11.2815965,22.1419069 L11.2815965,22.1415901 Z"></path>
        </svg>
    </a>
    

    
    <a class="social-icon" href="https://medium.com/@JosiahParry/" target="_blank" rel="noopener" title="Medium">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M2,2 L26,2 L26,26 L2,26 L2,2 Z M7.72727142,10.0265545 L7.72727142,17.1527156 C7.77112416,17.4097828 7.69008764,17.6723786 7.50898513,17.8600642 L5.81538462,19.9143852 L5.81538462,20.1852847 L10.617683,20.1852847 L10.617683,19.9143852 L8.92408245,17.8600642 C8.74165168,17.6726892 8.65559727,17.4118239 8.69074193,17.1527156 L8.69074193,10.9897526 L12.9059255,20.1852847 L13.3951878,20.1852847 L17.0157294,10.9897526 L17.0157294,18.3190884 C17.0157294,18.514738 17.0157294,18.5523628 16.8877685,18.6802876 L15.5855778,19.9444852 L15.5855778,20.2153846 L21.9083531,20.2153846 L21.9083531,19.9444852 L20.6513252,18.7103876 C20.5403599,18.6258033 20.4853154,18.4867833 20.50831,18.3491883 L20.50831,9.28158097 C20.4853154,9.14398599 20.5403599,9.00496587 20.6513252,8.92038167 L21.9384615,7.68628409 L21.9384615,7.41538462 L17.4824105,7.41538462 L14.3059685,15.3391941 L10.6929541,7.41538462 L6.01861668,7.41538462 L6.01861668,7.68628409 L7.52403936,9.49980554 C7.67182769,9.63301305 7.74730311,9.82863473 7.72727142,10.0265545 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/josiahparry" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    
</div>




	<div class="footer-mobile-links">
		<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
		<span class="divider-bar">|</span>
		<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>
	</div>

	<script src="/js/main.min.c1aee25a817e9beb1f9c4afd9d62311227a7f5e46720e404dc1dda97281f47f2.js" integrity="sha256-wa7iWoF+m+sfnEr9nWIxEien9eRnIOQE3B3alygfR/I="></script>
</footer>
    </body>
</html>